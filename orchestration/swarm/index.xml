<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Swarm on Docker et Orchestration</title><link>https://zaggash.github.io/tp-iut-docker/orchestration/swarm/</link><description>Recent content in Swarm on Docker et Orchestration</description><generator>Hugo -- gohugo.io</generator><language>fr-fr</language><lastBuildDate>Mon, 15 Jun 2020 21:37:57 +0200</lastBuildDate><atom:link href="https://zaggash.github.io/tp-iut-docker/orchestration/swarm/index.xml" rel="self" type="application/rss+xml"/><item><title>Créer son cluster Swarm</title><link>https://zaggash.github.io/tp-iut-docker/orchestration/swarm/create_swarm/</link><pubDate>Mon, 15 Jun 2020 21:37:57 +0200</pubDate><guid>https://zaggash.github.io/tp-iut-docker/orchestration/swarm/create_swarm/</guid><description>Activation Swarm n&amp;rsquo;est pas actif par defaut dans Docker.
Essayer la commande suivante:
$ docker node ls Le premier noeud d&amp;rsquo;un cluster Swarm est initialisé avec docker swarm init
Ne pas executer docker swarm init sur tous les noeuds !
Vous auriez plusieurs clusters différents.
Pour commencer il faut bien nommer ses machines.
Vérifier que les VMs ont bien 3 noms distincts, sinon renommer les !
$ sudo hostnamectl set-hostname node1 $ sudo hostnamectl set-hostname node2 $ sudo hostnamectl set-hostname node3 Puis vérifier qu&amp;rsquo;ils sont bien synchronisé à un serveur de temps</description></item><item><title>Créer un service</title><link>https://zaggash.github.io/tp-iut-docker/orchestration/swarm/create_service/</link><pubDate>Mon, 15 Jun 2020 21:37:57 +0200</pubDate><guid>https://zaggash.github.io/tp-iut-docker/orchestration/swarm/create_service/</guid><description>Pour les besoins du TP, on va garder un manager et 2 workers.
Les applications ne sont pas critiques et nous sommes en mode POC.
On va donc ne garder que node1 en tant que manager.
Executer la commande suivante sur node1 :
$ docker node demote node2
$ docker node demote node3
Lancer le service On lance un service avec la commande docker service create ..., on peut faire l&amp;rsquo;analogie avec docker run .</description></item><item><title>Le réseau Ingress Overlay</title><link>https://zaggash.github.io/tp-iut-docker/orchestration/swarm/ingress_overlay/</link><pubDate>Mon, 15 Jun 2020 21:37:57 +0200</pubDate><guid>https://zaggash.github.io/tp-iut-docker/orchestration/swarm/ingress_overlay/</guid><description>Pour commencer cette partie, nous allons supprimer le service demo
docker service rm demo
Swarm et les Overlay Nous venons de déployer une application sur le cluster et l&amp;rsquo;on a vu que le port du service est disponible sur tous les noeuds.
Cela est possible grâce au réseau par défaut de Swarm, appelé ingress.
$ docker network ls NETWORK ID NAME DRIVER SCOPE 6b141a0943ca bridge bridge local bfc621566968 docker_gwbridge bridge local 6dbb4bea0e35 host host local 1b6ek4sxqg9g ingress overlay swarm 797221e77f12 none null local C&amp;rsquo;est un réseau overlay installé de base, et nécessaire pour les flux entrant.</description></item><item><title>Retour sur notre Application</title><link>https://zaggash.github.io/tp-iut-docker/orchestration/swarm/multi_services_app/</link><pubDate>Mon, 15 Jun 2020 21:37:57 +0200</pubDate><guid>https://zaggash.github.io/tp-iut-docker/orchestration/swarm/multi_services_app/</guid><description>Pour commencer cette partie, on fait le ménage.
docker service rm $(docker service ls -q)
Nous allons maintenant reprendre l&amp;rsquo;application Dockercoin et la faire tourner dans notre cluster.
Nous allons construire les images, les envoyer sur le hub, puis les exécuter dans le cluster.
Ici nous sommes obligé d&amp;rsquo;envoyer les images dans un registry.
Avec la commande docker-compose up, toutes les images de nos services sont construite en local.</description></item></channel></rss>